# 视频压缩工具 - 启动说明

## 准备工作

### 1. 安装 Python 依赖

打开命令提示符(CMD)或PowerShell,在项目目录下执行:

```bash
python -m pip install -r requirements.txt
```

或者单独安装:

```bash
python -m pip install PyQt5>=5.15.0
python -m pip install pytest>=7.0.0
```

### 2. 配置 FFmpeg

#### 方法一: 下载内置FFmpeg (推荐)

1. **下载 FFmpeg for Windows**:
   - 访问: https://www.gyan.dev/ffmpeg/builds/
   - 下载 "ffmpeg-release-essentials.zip"

2. **解压并复制文件**:
   - 解压下载的zip文件
   - 找到 `bin` 目录中的以下文件:
     - `ffmpeg.exe`
     - `ffprobe.exe`
   - 将这两个文件复制到项目的 `ffmpeg/bin/` 目录

3. **验证**:
   ```bash
   ffmpeg\bin\ffmpeg.exe -version
   ```

#### 方法二: 使用系统FFmpeg

1. 下载并安装FFmpeg到系统
2. 添加到系统PATH环境变量
3. 验证: `ffmpeg -version`

## 运行程序

### 使用命令行启动

在项目目录下执行:

```bash
python main.py
```

### 使用双击启动

双击 `run.bat` 文件(如果有的话)

## 快速测试

### 运行单元测试

```bash
python -m pytest tests/
```

### 测试FFmpeg连接

```bash
python -c "from core.utils import check_ffmpeg_installed; print('FFmpeg可用' if check_ffmpeg_installed() else 'FFmpeg未找到')"
```

## 常见问题

### Q1: 提示 "ModuleNotFoundError: No module named 'PyQt5'"

**解决**: 安装PyQt5
```bash
python -m pip install PyQt5
```

### Q2: 提示 "FFmpeg 未找到"

**解决**: 按照上面的步骤配置FFmpeg

### Q3: 程序无法启动

**检查清单**:
1. Python版本是否 >= 3.8
2. PyQt5是否已安装
3. FFmpeg是否已配置

### Q4: Windows Defender 阻止运行

**解决**: 添加程序目录到Windows Defender的排除列表

## 使用教程

1. **启动程序**: 运行 `python main.py`

2. **添加视频**:
   - 拖拽视频文件到程序窗口
   - 或点击"选择文件"按钮

3. **设置参数**:
   - 选择质量等级 (高/中/低)
   - 选择压缩模式
   - (可选) 展开高级选项

4. **开始压缩**:
   - 点击"开始压缩"按钮
   - 观察进度条

5. **查看结果**:
   - 压缩完成后会自动打开输出目录
   - 查看压缩统计信息

## 技术支持

如遇问题，请提供:
- Python版本
- 操作系统版本
- 错误信息截图
- 操作步骤
